<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="style.css" type="text/css" />
        <title>Plan</title>
    </head>
    <body>
        <h1 id="sdp">Assn1 Plan</h1>

        <div class="nav-bar">
            <h2>Navigation</h2>
            <a href="./index.html">Check out the blog</a>
            <a href="./about.html">About the blogger</a>
            <a href="./plan.html">See the design plan</a>
            <a href="./techtips+css.html">The prettier tips</a>
            <a href="./techtips-css.html">The uglier tips</a>
        </div>
        <div id="phase0">
            <h2>Phase 0: Requirements Specifications</h2>
            <h3>The problem</h3>
            <ul>
                <li>The result of this project is a Python program that runs a simple http server. </li>
                <li>
                    The server will respond to proper http GET requests and handle several different situations with appropriate
                    responses. Some of these situations include:
                        <ul>
                            <li>Retreiving a page and successfully sending it to a user-agent based on a request for the page</li>
                            <li>Redirecting a user-agent to other pages</li>
                            <li>Blocking a user-agents access to areas they shouldn't access</li>
                            <li>Respond with an appropriate error message if a request cannot be handled</li>
                            
                        </ul>
                </li>
            </ul>
            <h3>The solution</h3>
            <ul>
                <li>
                    <strong>What I Know: </strong>the HTTPserver class defined by Python has functionality for many of the 
                    features/behaviors I need to include
                </li>
                <li>
                    <strong>What I'm not sure about: </strong>Is my code still going to be long and verbose, or does the functionality
                    do so much that the resulting source code is stream-lined?
                </li>
            </ul>
        </div>

        <div id="phase1">
            <h2>Phase 1: System Analysis</h2>
            <h3>Data</h3>
            <ul>
                <li>
                    The server is self contained in a single Python file. It will be run from the command line. The server will be 
                    listening on localhost and therefore never be exposed to the actual internet.
                </li>
                <li>
                    http request will be sent through a browser. HTTPserver knows how to collect the request, but leaves the details 
                    of handling the request to overridden methods.
                </li>
                <li>
                    Static html files will be accessible to the server because it will be running from the same directory where the 
                    files are located.
                </li>
                <li>
                    Data will be transfered back to the user-agent by implementing HTTPserver methods and functionality
                </li>
            </ul>
            <h3>Output</h3>
            <ul>
                <li>When browsing to localhost:8000 on the source machine, a website will be available to view and navigate</li>
                <li>
                    Many pages will be the ones created for the previous assignment while others will be dynamically generated
                    and be new to this assignment
                </li>
            </ul>
        </div>    
            
        <div id="phase2">
            <h2>Phase 2: Design</h2>
                <h3>Functions</h3>
                    <code>do_GET()</code>
                    <p class="doc-string">
                        Class method that must be overriden to respond to get requests and will be the root of all functionality for this project. 
                        calls the <code>serveFile</code> function if requested path is an existing file and <code>inspectPath</code> otherwise.
                    </p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    remove leading "/" from the path
    if path can be accessed:
        check extension to get MIME type
        call a function to serveFile and pass along the truncated path and MIME type
    else call inspectPath and pass along the truncated path
                        </pre>
                    </div>

                    <code>serveFile(str: filePath , str: mimeType, int: statusCode=200): void</code>
                    <p class="doc-string">Serves the file at filePath to the user. Calls <code>beginResponse</code></p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    calls beginResponse() with statusCode
    read in the file at filePath in binary mode
    measure the size of the read file for the content length header
    call send_header() to add a content length
    call send_header() to add a mimeType
    call end_headers()
    write file data to self.wfile()

                        </pre>
                    </div>
                    
                    <code>inspectPath(str: requestPath): void</code>
                    <p class="doc-string">
                        Takes the requested file path and calls the appropriate processing function, passing any relavent information.
                        Calls <code>sendRedirect</code>, <code>makeDebug</code>, <code>denyAccess</code>, <code>teapotResponse</code>,
                        and, <code>send404</code>
                    </p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    if requestPath == ""
        call sendRedirect() with "index.html"

    else if requestPath + ".html" can be accessed
        call sendRedirect() with requestPath + ".html"

    else if path starts with "bio"
        call sendRedirect() with "about.html" as the redirectPath

    else if path in ("tips", "help")
        call sendRedirect() with "techtips+css.html" as the redirectPath

    else if requestPath is "Debugging"
        call makeDebug()

    else if requestPath is "teapot" 
        call teapotResponse 
    
    else if requestPath is "forbidden" 
        call denyAccess()
    
    else 
        call send404()

                        </pre>
                    </div>

                    

                    <code>sendRedirect(str: redirectLocation): void</code>
                    <p class="doc-string">Creates a redirect response and with the location being redirectPath. Calls <code>beginResponse</code></p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    call beginResponse with status code 301
    call send_header() to add a location corresponding to redirectPath
    call end_headers()

                        </pre>
                    </div>


                    <code>makeDebug(): void</code>
                    <p class="doc-string">Creates and serves debug page.</p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    call beginResponse() with status code 200
    create a format string for the embedded html 
        format the server's version string using self.server_version (override?)
        format the server's current date and time using self.date_time_string()
        format the clients IP address and port using client_address
        format the path requested by the client using self.path
        format the HTTP request type (a.k.a. command) using self.command
        format the HTTP version of this request using self.request_version
        format the headers sent by the browser as an ordered list using self.headers
    Make the format string into a byte string 
    call send_header() to add content length 
    call send_header() to add MIME type 
    call end_headers() 
    write formatted byte string to self.wfile
                        </pre>
                    </div>

                    
                    <code>teapotResponse(): void</code>
                    <p class="doc-string">Send a short and stout response explaining that you're not a coffee pot</p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    call serveFile() with teapot file path, MIME type, and status code 418   
                        </pre>
                    </div>
                    

                    <code>denyAccess(): void</code>
                    <p class="doc-string">Send a response that lets the user know they can't access the requested page</p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    call serveFile() with forbidden file path, MIME type and status code 403
                        </pre>
                    </div>


                    <code>send404(): void</code>
                    <p class="doc-string">Lets the user know their requested path wasn't found</p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    call serveFile() with 404 file path, MIME type, and status code 404
                        </pre>  
                    </div>

                    <code>beginResponse(int: statusCode): void</code>
                    <p class="doc-string">Begins a response that includes all 4 required headers for any response. Uses several
                        BaseHTTPRequestHandler built-in functionalities</p>
                    <div class="pseudocode">
                        <pre>
psueodcode:
    call send_response() with statusCode
    call send_header() to add a connection header
    call send_header() to add a cache-control
    
                        </pre>  
                    </div>






    </div>

          
        </div>        
        
        <div id="phase3">
            <h2>Phase 3: Implementation</h2>
        </div>        
        
        <div id="phase4">
            <h2>Phase 4: Testing & Debugging</h2>
            <h3>Working links test</h3>
            <ul>
                <li><strong>Procedure:</strong> For each webpage,
                    <ol>
                        <li>Scroll to the top of the page where the navigation bar is visible.</li>
                        <li>Click on the first link</li>
                        <li>Confirm expected result</li>
                        <li>Return to the original page and repeat steps 1-3 for each link</li>
                        <li>Navigate to another webpage and repeat steps 1-4 for every page in the project</li>
                    </ol></li>
                
                <li><strong>Expected Result:</strong> The browser is redirected to the page that corresponds to the link text without any other input</li>

            </ul>

            <h3>Valid HTML test</h3>
            <ul>
                <li>
                    <strong>Procedure:</strong> For each wepage, upload the source file to W3C's HTML validator tool
                    <ul><li>https://validator.w3.org/nu/#file</li></ul>
                </li>
                
                <li><strong>Expected Result:</strong> The tool reports no warnings or errors</li>
            </ul> 

            <h3>Valid CSS test</h3>
            <ul>
                <li>
                    <strong>Procedure:</strong> For each wepage, upload the source file to W3C's CSS validator tool
                    <ul><li>https://validator.w3.org/nu/#file</li></ul>
                </li>
                
                <li><strong>Expected Result:</strong> The tool reports no warnings or errors</li>

            </ul>
            
        </div>        
        
        <div id="phase5">
            <h2>Phase 5: Deployment</h2>
        </div>        
        
        <div id="phase6">
            <h2>Phase 6: Maintenance</h2>
            <ul>
                <li>
                    What parts of your program are sloppily written and hard to understand?
                    <ul>
                        <li> Are there parts of your program which you aren't quite sure how/why they work?</li>
                        <li>If a bug is reported in a few months, how long would it take you to find the cause?</li>
                    </ul>
                    <p>ANSWER: My css selectors are spread sporatically between elements and classes. There's no good system
                       to explain when one is used versus another
                    </p>
                </li>
                <li>
                    Will your document make sense to:
                    <ul>
                        <li>anybody besides yourself?</li>
                        <li>yourself in six month's time?</li>
                    </ul>
                    <p>
                        ANSWER: I'm realizing that classes help navigate through the source file. I think I've added just enough
                        class attributes to make sense of the general structure. I use a lot of nested lists and I'm sure those
                        are one of the most confusing parts. I bet the navigability could be improved by adding classes.
                    </p>
                </li>
                <li>
                    How easily will it be to add a new feature to this program in a year?
                    <p>ANSWER: I may have to do some work adding classes; so as far as html goes, maybe not that easy.</p>
                </li>
                <li>
                    Will your program continue to work after upgrading:
                    <ul>
                        <li>your computer's hardware?</li>
                        <li>the operating system?</li>
                        <li>to the next version of Python?</li>
                    </ul>
                    <p>
                        ANSWER: This program doesn't use any 3rd party libraries. It is very basic HTML and should be rendered by all 
                        main-stream internet browsers. Best practices were used for syntax so the next version of html should 
                        support all features.
                    </p>
                </li>
            </ul>
        </div>
    </body>

</html>